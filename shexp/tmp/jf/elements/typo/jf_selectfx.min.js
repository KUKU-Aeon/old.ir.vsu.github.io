/**
* @version		JF_PDT_090
* @author		JoomForest http://www.joomforest.com
* @copyright	Copyright (C) 2011-2016 JoomForest.com
* @license		http://www.gnu.org/licenses/gpl-2.0.html GNU/GPL
*/
!function(e){"use strict";function t(e,t){if(!e)return!1;for(var s=e.target||e.srcElement||e||!1;s&&s!=t;)s=s.parentNode||!1;return s!==!1}function s(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);return e}function l(e,t){this.el=e,this.options=s({},this.options),s(this.options,t),this._init()}l.prototype.options={newTab:!0,stickyPlaceholder:!0,onChange:function(e){return!1}},l.prototype._init=function(){var e=this.el.querySelector("option[selected]");this.hasDefaultPlaceholder=e&&e.disabled,this.selectedOpt=e||this.el.querySelector("option"),this._createSelectEl(),this.selOpts=[].slice.call(this.selEl.querySelectorAll("li[data-option]")),this.selOptsCount=this.selOpts.length,this.current=this.selOpts.indexOf(this.selEl.querySelector("li.jf_selected"))||-1,this.selPlaceholder=this.selEl.querySelector("span.jf_placeholder_value"),this._initEvents()},l.prototype._createSelectEl=function(){var e="",t=function(e){var t="",s="",l="";return!e.selectedOpt||this.foundSelected||this.hasDefaultPlaceholder||(s+="jf_selected ",this.foundSelected=!0),e.getAttribute("data-icon")&&(s+=e.getAttribute("data-icon")),e.getAttribute("data-link")&&(l="data-link="+e.getAttribute("data-link")),""!==s&&(t='<i class="'+s+'"></i>'),"<li "+l+' data-option data-value="'+e.value+'">'+t+"<span>"+e.textContent+"</span></li>"};[].slice.call(this.el.children).forEach(function(s){if(!s.disabled){var l=s.tagName.toLowerCase();"option"===l?e+=t(s):"optgroup"===l&&(e+='<li class="jf_optgroup"><span>'+s.label+"</span><ul>",[].slice.call(s.children).forEach(function(s){e+=t(s)}),e+="</ul></li>")}});var s=this.el.getAttribute("data-icon"),l='<div class="jf_options"><ul>'+e+"</ul></div>";this.selEl=document.createElement("div"),this.selEl.className=this.el.className,this.selEl.tabIndex=this.el.tabIndex,this.selEl.innerHTML='<span class="jf_placeholder"><i class="'+s+'"></i><span class="jf_placeholder_value">'+this.selectedOpt.textContent+"</span></span>"+l,this.el.parentNode.appendChild(this.selEl),this.selEl.appendChild(this.el)},l.prototype._initEvents=function(){var e=this;this.selPlaceholder.addEventListener("click",function(){e._toggleSelect()}),this.selOpts.forEach(function(t,s){t.addEventListener("click",function(){e.current=s,e._changeOption(),e._toggleSelect()})}),document.addEventListener("click",function(s){var l=s.target;e._isOpen()&&l!==e.selEl&&!t(l,e.selEl)&&e._toggleSelect()}),this.selEl.addEventListener("keydown",function(t){var s=t.keyCode||t.which;switch(s){case 38:t.preventDefault(),e._navigateOpts("prev");break;case 40:t.preventDefault(),e._navigateOpts("next");break;case 32:t.preventDefault(),e._isOpen()&&"undefined"!=typeof e.preSelCurrent&&-1!==e.preSelCurrent&&e._changeOption(),e._toggleSelect();break;case 13:t.preventDefault(),e._isOpen()&&"undefined"!=typeof e.preSelCurrent&&-1!==e.preSelCurrent&&(e._changeOption(),e._toggleSelect());break;case 27:t.preventDefault(),e._isOpen()&&e._toggleSelect()}})},l.prototype._navigateOpts=function(e){this._isOpen()||this._toggleSelect();var t="undefined"!=typeof this.preSelCurrent&&-1!==this.preSelCurrent?this.preSelCurrent:this.current;("prev"===e&&t>0||"next"===e&&t<this.selOptsCount-1)&&(this.preSelCurrent="next"===e?t+1:t-1,this._removeFocus(),jQuery(this.selOpts[this.preSelCurrent]).addClass("jf_focus"))},l.prototype._toggleSelect=function(){this._removeFocus(),this._isOpen()?(-1!==this.current&&(this.selPlaceholder.textContent=this.selOpts[this.current].textContent),jQuery(this.selEl).removeClass("jf_active")):(this.hasDefaultPlaceholder&&this.options.stickyPlaceholder&&(this.selPlaceholder.textContent=this.selectedOpt.textContent),jQuery(this.selEl).addClass("jf_active"))},l.prototype._changeOption=function(){"undefined"!=typeof this.preSelCurrent&&-1!==this.preSelCurrent&&(this.current=this.preSelCurrent,this.preSelCurrent=-1);var t=this.selOpts[this.current];this.selPlaceholder.textContent=t.textContent,this.el.value=t.getAttribute("data-value");var s=this.selEl.querySelector("li.jf_selected");s&&jQuery(s).removeClass("jf_selected"),jQuery(t).addClass("jf_selected"),t.getAttribute("data-link")&&(this.options.newTab?e.open(t.getAttribute("data-link"),"_blank"):e.location=t.getAttribute("data-link")),this.options.onChange(this.el.value)},l.prototype._isOpen=function(e){return jQuery(this.selEl).hasClass("jf_active")},l.prototype._removeFocus=function(e){var t=this.selEl.querySelector("li.jf_focus");t&&jQuery(t).removeClass("jf_focus")},e.SelectFx=l}(window),function(e){e(window).load(function(){e("div.jf_select").each(function(t){var s="jf_select_id_"+(t+1),l=e(this).find(".jf_options ul li").size();if(l>6)var i=260;else var i=40*l+10;e(this).attr("id",s),e("head").append('<style type="text/css">#'+s+".jf_active .jf_options{height:"+i+"px}</style>")}).click(function(t){var s=e(this);s.hasClass("jf_active")?setTimeout(function(){s.addClass("jf_overflow_scroll")},800):s.removeClass("jf_overflow_scroll"),t.stopPropagation()}),e(document).click(function(){e("div.jf_select").removeClass("jf_overflow_scroll")})})}(jQuery);jQuery(document).ready(function(e){[].slice.call(document.querySelectorAll("select.jf_select")).forEach(function(e){new SelectFx(e)})});